$(function(){function e(e){console.log(e),e.response.error?r("error",e.response.error.description):e.response.results?r("results",e.response.results):($(".error").hide(),$("#search").hide(),t(e.current_observation,n(e.current_observation.weather.toLowerCase(),o(e.current_observation.local_tz_offset))))}function r(e,r){"error"==e?($(".error").text("Error: "+r),$(".error").fadeIn("fast")):"results"==e&&(console.log(r),$(".error").html("Did you mean:<br>"),$.each(r,function(e,r){$(".error").append("- "+r.city+", "+r.state+" "+r.country_name+"<br>")}),$(".error").show())}function o(e){var r=moment().utcOffset(e).format("HH");return 6>=r||r>=19?"night":"day"}function n(e,r){return"night"==r?"cloudy"==e||"overcast"==e?["cloudy","overcast"]:"smoke"==e||"fog"==e||"haze"==e||"mist"==e?["fog","overcast"]:"mostly cloudy"==e?["mostly_cloudy_night","night"]:"mostly sunny"==e?["mostly_sunny","sunny"]:"partly cloudy"==e||"scattered clouds"==e?["partly_cloudy_night","night"]:"change of rain"==e||"rain"==e||"showers"==e?["showers_night","overcast"]:"chance of a thunderstorm"==e?["thunderstorm_night","overcast"]:"light rain showers"==e||"light rain"==e?["drizzle","overcast"]:"sunny"==e||"clear"==e?["clear_night","night"]:"snow"==e?["snow_showers_night","snow"]:"light snow showers"==e||"light snow"==e?["snow_flurry","snow"]:"snow and rain"==e||"rain and snow"==e?["sleet","snow"]:["unknown","overcast"]:"cloudy"==e||"overcast"==e?["cloudy","overcast"]:"smoke"==e||"fog"==e||"haze"==e||"mist"==e?["fog","overcast"]:"mostly cloudy"==e?["mostly_cloudy_day","overcast"]:"mostly sunny"==e?["mostly_sunny","sunny"]:"partly cloudy"==e||"scattered clouds"==e?["partly_cloudy","sunny"]:"change of rain"==e||"rain"==e||"showers"==e?["showers_day","overcast"]:"chance of a thunderstorm"==e?["thunderstorm_day","overcast"]:"light rain showers"==e||"light rain"==e?["drizzle","overcast"]:"sunny"==e||"clear"==e?["sunny","sunny"]:"snow"==e?["snow_showers_day","snow"]:"light snow showers"==e||"light snow"==e?["snow_flurry","snow"]:"snow and rain"==e||"rain and snow"==e?["sleet","snow"]:["unknown","overcast"]}function t(e,r){var o=$('<div class="weather"></div>'),n=$('<div class="weather-gutter"></div>'),t=$('<img src="https://kurisubrooks.com/static/nano/weather/light/'+r[0].toLowerCase()+'.png" width="98px">'),a=$('<div class="weather-condition">'+e.weather+"</div>"),i=$('<div class="weather-time">'+moment().utcOffset(e.local_tz_offset).format("dddd, h:mm a")+"</div>"),d=$('<div class="weather-temp">'+e.temp_c+"<sup>&#xBA;C</sup></div>"),c=$('<div class="weather-feels">Feel like '+e.feelslike_c+"&#xBA;</div>"),l=$('<div class="weather-location">'+e.display_location.full+"</div>");$(n).append(t),$(n).append(a),$(o).append(n),$(o).append(i),$(o).append(d),$(o).append(c),$(o).hide(),$(".weather-container").append(l),$(".weather-container").append(o),$(".weather").delay(10).fadeIn("slow"),$("body").attr("style",s[r[1]])}var a="faca357e3d78d552",s={overcast:"background:-moz-linear-gradient(270deg,#9CB4D5 0%,#7798B2 65%,#7798B2 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%, #9CB4D5),color-stop(65%,#7798B2),color-stop(100%,#7798B2));background:-webkit-linear-gradient(270deg,#9CB4D5 0%,#7798B2 65%,#7798B2 100%);background:-o-linear-gradient(270deg,#9CB4D5 0%,#7798B2 65%,#7798B2 100%);background:-ms-linear-gradient(270deg,#9CB4D5 0%,#7798B2 65%,#7798B2 100%);background:linear-gradient(180deg,#9CB4D5 0%,#7798B2 65%,#7798B2 100%);",sunny:"background:-moz-linear-gradient(270deg,#67B0DE 0%,#61AED5 65%,#61AED5 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%, #67B0DE),color-stop(65%,#61AED5),color-stop(100%,#61AED5));background:-webkit-linear-gradient(270deg,#67B0DE 0%,#61AED5 65%,#61AED5 100%);background:-o-linear-gradient(270deg,#67B0DE 0%,#61AED5 65%,#61AED5 100%);background:-ms-linear-gradient(270deg,#67B0DE 0%,#61AED5 65%,#61AED5 100%);background:linear-gradient(180deg,#67B0DE 0%,#61AED5 65%,#61AED5 100%);",night:"background:-moz-linear-gradient(270deg,#8452F5 0%,#946BF5 65%,#946BF5 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%, #8452F5),color-stop(65%,#946BF5),color-stop(100%,#946BF5));background:-webkit-linear-gradient(270deg,#8452F5 0%,#946BF5 65%,#946BF5 100%);background:-o-linear-gradient(270deg,#8452F5 0%,#946BF5 65%,#946BF5 100%);background:-ms-linear-gradient(270deg,#8452F5 0%,#946BF5 65%,#946BF5 100%);background:linear-gradient(180deg,#8452F5 0%,#946BF5 65%,#946BF5 100%);"};$("body").attr("style",s.sunny),$("#search").submit(function(){var r=$("#search-box").val().replace(",","/");return $.getJSON("https://api.wunderground.com/api/"+a+"/conditions/q/"+r+".json?callback=?",function(r){e(r)}),!1})});
